Metadata-Version: 2.4
Name: pm-data-infra
Version: 0.1.0
Summary: Phase 1 capture/ingest plant.
Requires-Python: >=3.11
Description-Content-Type: text/markdown
Requires-Dist: orjson>=3.9.15
Requires-Dist: requests>=2.31.0
Requires-Dist: uvloop>=0.19.0; platform_system != "Windows"
Requires-Dist: websockets>=12.0

# pm-data-infra

Phase 1 capture plant for Polymarket CLOB WS traffic: multi-shard WS capture, stable run artifacts, integrity verification, audit, and latency reporting. The single source of truth is [docs/MASTER.md](docs/MASTER.md).

## Quickstart (uv)
```bash
uv sync
uv run pm_data --help
```

Optional uvloop install (non-Windows) and verification:
```bash
uv pip install uvloop
uv run python -c "import uvloop"
```

Capture defaults (details in [docs/MASTER.md](docs/MASTER.md)):
`PM_DATA_CAPTURE_UNIVERSE_REFRESH_ENABLE=true`, `PM_DATA_WS_PING_INTERVAL_SECONDS=10`, `PM_DATA_WS_PING_TIMEOUT_SECONDS=10`.

## Run + Audit (10m / 1h)
Full operations guidance lives in [docs/MASTER.md](docs/MASTER.md).

10-minute run:
```bash
timeout --signal=INT 10m uv run pm_data capture --run-id run-10m
```

1-hour run:
```bash
timeout --signal=INT 1h uv run pm_data capture --run-id run-1h
```

Post-run audit:
```bash
RUN_DIR="data/runs/<run_id>"
uv run pm_data capture-verify --run-dir "$RUN_DIR" --summary-only
uv run pm_data capture-audit --run-dir "$RUN_DIR"
uv run pm_data capture-latency-report --run-dir "$RUN_DIR"
```

## Notes
- Run capture under tmux so the terminal stays responsive.
- See [docs/MASTER.md](docs/MASTER.md) for configuration, run artifacts, and troubleshooting.
